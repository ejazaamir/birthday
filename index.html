<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Birthday PPP! üéÄ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Playfair+Display:ital,wght@0,400;1,400&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
    :root {
      --pink-deep:#c71585; --pink-hot:#ff1493; --pink-mid:#ff69b4;
      --pink-light:#ffb6c1; --gold:#ffd700; --gold-dark:#b8860b;
    }
    html,body { width:100%;height:100%;overflow:hidden;background:#0d0608;
      font-family:'Playfair Display',Georgia,serif; }
    .page { position:fixed;inset:0;transition:opacity .8s ease; }

    /* ===================== PAGE 1 ‚Äî DOOR ===================== */
    #page1 {
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      background:radial-gradient(ellipse 130% 90% at 50% 20%,#4a0e2a 0%,#6b1238 22%,#8c1a48 45%,#5c0e32 72%,#2a0618 100%);
      z-index:100;
      padding:clamp(8px,3vh,30px) clamp(8px,3vw,30px);
    }
    .p1-particle{position:absolute;pointer-events:none;animation:p1-float linear infinite;opacity:0;}
    @keyframes p1-float{0%{transform:translateY(105vh) rotate(0);opacity:0}5%{opacity:.9}90%{opacity:.6}100%{transform:translateY(-10vh) rotate(540deg);opacity:0}}
    .p1-title{font-family:'Dancing Script',cursive;font-size:clamp(1.4rem,min(4.5vw,5vh),3.6rem);color:#ffc0cb;
      text-shadow:0 0 15px #ff1493,0 0 35px #ff69b4,0 0 70px rgba(255,20,147,.4);
      letter-spacing:4px;margin-bottom:clamp(6px,2.5vh,2rem);animation:title-glow 2.4s ease-in-out infinite;
      text-align:center;padding:0 1rem;}
    @keyframes title-glow{0%,100%{text-shadow:0 0 15px #ff1493,0 0 35px #ff69b4}50%{text-shadow:0 0 25px #ff1493,0 0 55px #ff69b4,0 0 90px #ffb6c1}}
    /* ‚îÄ‚îÄ PERSISTENT SITE TITLE (fixed, spans dark room ‚Üí lit room) ‚îÄ‚îÄ */
    #siteTitle{
      position:fixed;top:clamp(8px,2.5vh,18px);left:50%;transform:translateX(-50%);
      z-index:150;pointer-events:none;
      font-family:'Dancing Script',cursive;
      font-size:clamp(1.4rem,min(4.5vw,5vh),3.6rem);
      color:#ffc0cb;
      text-shadow:0 0 15px #ff1493,0 0 35px #ff69b4,0 0 70px rgba(255,20,147,.4);
      letter-spacing:4px;text-align:center;padding:0 1rem;
      white-space:nowrap;
      opacity:0;
      transition:opacity 1.2s ease;
      animation:title-glow 2.4s ease-in-out infinite;
    }
    #siteTitle.visible{ opacity:1; }
    /* ‚îÄ‚îÄ HEAVEN GATE CLOUDS ‚îÄ‚îÄ */
    .gate-cloud{position:absolute;pointer-events:none;border-radius:50%;
      background:rgba(255,255,255,.62);filter:blur(22px);
      animation:cloud-drift var(--cd,20s) ease-in-out infinite alternate;}
    @keyframes cloud-drift{0%{transform:translate(0,0)}100%{transform:translate(var(--cx,30px),var(--cy,-12px))}}
    /* ‚îÄ‚îÄ GATE SCENE ‚îÄ‚îÄ */
    .gate-scene{perspective:1400px;perspective-origin:50% 50%;position:relative;}
    .gate-wrap{
      position:relative;
      width:clamp(270px,min(88vw,68vh),560px);
      height:clamp(310px,min(70vh,76vw),520px);
      margin-top:clamp(58px,10vh,88px); /* space for crown above */
      cursor:pointer;user-select:none;
    }
    /* ‚îÄ‚îÄ ORNAMENTAL CROWN ‚îÄ‚îÄ */
    .gate-crown{
      position:absolute;left:-3%;width:106%;
      bottom:100%;height:clamp(52px,10%,80px);
      background:linear-gradient(90deg,#1a0610 0%,#6b1238 12%,#c71585 30%,#e060a0 50%,#c71585 70%,#6b1238 88%,#1a0610 100%);
      border-radius:6px 6px 0 0;
      border:2px solid rgba(212,149,10,.55);border-bottom:none;
      box-shadow:0 -4px 20px rgba(199,21,133,.38),inset 0 2px 8px rgba(255,182,193,.12);
      display:flex;align-items:center;justify-content:center;
      overflow:visible;z-index:10;
    }
    .gate-crown::before{
      content:'';position:absolute;
      left:8%;width:84%;top:0;height:45%;
      background:linear-gradient(90deg,transparent,rgba(212,149,10,.15),rgba(212,149,10,.3),rgba(212,149,10,.15),transparent);
    }
    /* Raised center medallion */
    .gate-medallion{
      position:absolute;bottom:calc(100% - 16px);left:50%;transform:translateX(-50%);
      width:clamp(48px,8.5%,70px);height:clamp(48px,8.5%,70px);
      background:radial-gradient(circle at 38% 32%,#fff8d0,#ffd700 30%,#c08010 55%,#7a4808 72%,#3a2008 90%);
      border-radius:50%;
      border:2.5px solid rgba(255,240,160,.6);
      box-shadow:0 0 18px rgba(255,215,0,.9),0 0 45px rgba(255,215,0,.45),0 0 90px rgba(255,215,0,.18);
      display:flex;align-items:center;justify-content:center;
      font-size:clamp(1.3rem,2.6%,2rem);
      color:rgba(255,252,220,.9);text-shadow:0 0 8px rgba(255,200,50,.7);
      z-index:22;animation:gate-med-pulse 3s ease-in-out infinite;
    }
    @keyframes gate-med-pulse{0%,100%{box-shadow:0 0 18px rgba(255,215,0,.9),0 0 45px rgba(255,215,0,.45)}50%{box-shadow:0 0 28px rgba(255,215,0,1),0 0 70px rgba(255,215,0,.65),0 0 120px rgba(255,215,0,.22)}}
    .gate-crown-orn{
      font-size:clamp(.75rem,1.8%,1.15rem);
      color:rgba(212,149,10,.75);letter-spacing:clamp(3px,1%,8px);
      text-shadow:0 0 9px rgba(212,149,10,.5);user-select:none;
    }
    /* ‚îÄ‚îÄ SIDE PILLARS ‚îÄ‚îÄ */
    .gate-post{
      position:absolute;top:-4%;height:108%;
      width:clamp(18px,3.8%,30px);
      background:linear-gradient(90deg,#1a0810,#6b1238,#d4950a,#f0c040,#d4950a,#6b1238,#1a0810);
      border-radius:4px;
      box-shadow:0 0 16px rgba(212,149,10,.55),0 0 42px rgba(212,149,10,.22);
      z-index:10;
    }
    .gate-post-l{left:clamp(-22px,-4%,-10px);}
    .gate-post-r{right:clamp(-22px,-4%,-10px);}
    .gate-post::before,.gate-post::after{
      content:'';position:absolute;left:50%;transform:translateX(-50%);
      width:clamp(26px,5.5%,40px);height:clamp(26px,5.5%,40px);
      background:radial-gradient(circle at 38% 32%,#fff8d0,#ffd700 42%,#c08010 68%,#4a2c00 88%);
      border-radius:50%;
      box-shadow:0 0 15px rgba(255,215,0,.85),0 0 35px rgba(255,215,0,.38);
    }
    .gate-post::before{top:-16px;}
    .gate-post::after{bottom:-16px;}
    /* ‚îÄ‚îÄ CENTER DIVIDER POST ‚îÄ‚îÄ */
    .gate-center-post{
      position:absolute;top:0;left:50%;transform:translateX(-50%);
      width:clamp(12px,2.5%,20px);height:100%;
      background:linear-gradient(90deg,#1a0810,#6b1238,#d4950a,#f0c040,#d4950a,#6b1238,#1a0810);
      border-radius:3px;
      box-shadow:0 0 14px rgba(212,149,10,.6),0 0 38px rgba(212,149,10,.25);
      z-index:15;
    }
    .gate-hinge{
      position:absolute;left:50%;transform:translateX(-50%);
      width:clamp(16px,3.2%,24px);height:clamp(9px,2%,14px);
      background:linear-gradient(90deg,#6a4808,#c8880a,#f0c040,#c8880a,#6a4808);
      border-radius:3px;
      box-shadow:0 2px 6px rgba(0,0,0,.5),0 0 8px rgba(212,149,10,.5);
    }
    .gate-hinge-t{top:16%;}
    .gate-hinge-m{top:50%;transform:translate(-50%,-50%);}
    .gate-hinge-b{bottom:16%;}
    /* ‚îÄ‚îÄ GATE PANELS ‚îÄ‚îÄ */
    .gate-panel{
      position:absolute;top:0;width:50%;height:100%;
      transform-style:preserve-3d;
      transition:transform 1.8s cubic-bezier(.38,0,.22,1);
      z-index:5;
    }
    .gate-panel-l{left:0;transform-origin:left center;}
    .gate-panel-r{right:0;transform-origin:right center;}
    .gate-panel-l.open{transform:rotateY(-108deg);}
    .gate-panel-r.open{transform:rotateY(108deg);}
    /* Solid panel face */
    .gate-panel-front{
      position:absolute;inset:0;
      background:linear-gradient(155deg,#3d0e28 0%,#581530 18%,#440c25 38%,#5c1535 55%,#3d0e28 75%,#511230 100%);
      border:2.5px solid rgba(212,149,10,.55);
      display:flex;flex-direction:column;
      padding:clamp(8px,2.5%,14px) clamp(8px,2%,12px) clamp(22px,5.5%,36px);
      gap:clamp(6px,1.5%,10px);
      overflow:hidden;
    }
    .gate-panel-l .gate-panel-front{border-right:none;}
    .gate-panel-r .gate-panel-front{border-left:none;}
    /* Bottom decorative rail */
    .gate-panel-front::after{
      content:'‚öú';position:absolute;bottom:0;left:0;right:0;
      height:clamp(20px,5%,32px);
      background:linear-gradient(135deg,#2a0d1a,#5c1535,#2a0d1a);
      border-top:2px solid rgba(212,149,10,.45);
      box-shadow:inset 0 4px 8px rgba(0,0,0,.3);
      display:flex;align-items:center;justify-content:center;
      font-size:clamp(.75rem,1.6%,1.1rem);
      color:rgba(212,149,10,.65);text-shadow:0 0 8px rgba(212,149,10,.45);
      line-height:clamp(20px,5%,32px);text-indent:0;
    }
    /* Decorative inset panels */
    .gate-inset{
      flex:1;
      border:1.5px solid rgba(212,149,10,.42);
      border-radius:3px;
      background:linear-gradient(145deg,#1e0812,#300a1e,#1e0812);
      box-shadow:inset 2px 2px 10px rgba(0,0,0,.5),inset -1px -1px 5px rgba(255,100,180,.04);
      display:flex;align-items:center;justify-content:center;
      position:relative;overflow:hidden;
    }
    .gate-inset::before{
      content:'';position:absolute;inset:5px;
      border:1px solid rgba(212,149,10,.2);border-radius:2px;pointer-events:none;
    }
    .gate-inset-top{flex:2.2;}
    .gate-inset-bot{flex:1;}
    .gate-ornament{
      font-size:clamp(1.4rem,5%,2.4rem);
      color:rgba(212,149,10,.48);
      text-shadow:0 0 12px rgba(212,149,10,.38),0 0 28px rgba(212,149,10,.14);
      animation:gate-orn-glow 3.5s ease-in-out infinite;line-height:1;user-select:none;
    }
    .gate-ornament-sm{
      font-size:clamp(.85rem,3%,1.5rem);
      color:rgba(212,149,10,.38);
      text-shadow:0 0 10px rgba(212,149,10,.3);
      animation:gate-orn-glow 4s ease-in-out infinite;
      animation-delay:.7s;user-select:none;
    }
    @keyframes gate-orn-glow{0%,100%{opacity:.45}50%{opacity:.82;filter:brightness(1.5)}}
    /* Hint */
    .p1-hint{margin-top:clamp(6px,2vh,1.4rem);color:rgba(255,228,196,.85);font-size:.85rem;letter-spacing:3px;
      text-transform:uppercase;animation:hint-bounce 1.8s ease-in-out infinite;}
    @media(max-height:520px){.p1-hint{display:none;}}
    @media(max-height:480px){.p1-title{font-size:1.2rem;}}
    @keyframes hint-bounce{0%,100%{transform:translateY(0);opacity:.6}50%{transform:translateY(-6px);opacity:1}}

    /* ===================== PAGE 1.5 ‚Äî DARK ROOM ===================== */
    #page15 {
      display:none;opacity:0;transition:opacity .7s ease;
      background:#05010a;
      z-index:90;overflow:hidden;
    }
    /* faint floor/wall depth */
    #page15::before {
      content:'';position:absolute;inset:0;pointer-events:none;
      background:
        linear-gradient(180deg,transparent 50%,rgba(10,3,18,.95) 100%),
        radial-gradient(ellipse 110% 30% at 50% 100%,rgba(25,5,35,.8) 0%,transparent 70%);
    }
    /* faint window glow top-center */
    #page15::after {
      content:'';position:absolute;top:-15%;left:50%;transform:translateX(-50%);
      width:50%;height:55%;pointer-events:none;
      background:radial-gradient(ellipse,rgba(120,60,160,.05) 0%,transparent 70%);
    }
    /* Switch wrapper */
    .switch-wrap {
      position:absolute;bottom:13%;left:50%;transform:translateX(-50%);
      display:flex;flex-direction:column;align-items:center;gap:.7rem;
      cursor:pointer;user-select:none;
    }
    /* Wall plate */
    .switch-plate {
      width:54px;height:92px;
      background:linear-gradient(160deg,#2a1040,#180d2a);
      border:2px solid rgba(255,182,193,.55);
      border-radius:9px;
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 0 28px rgba(255,105,180,.55),0 0 70px rgba(255,105,180,.28),inset 0 0 12px rgba(255,105,180,.08);
      animation:sw-pulse 2.2s ease-in-out infinite;
      transition:box-shadow .2s;
    }
    .switch-wrap:hover .switch-plate {
      box-shadow:0 0 50px rgba(255,105,180,.85),0 0 110px rgba(255,105,180,.5),inset 0 0 18px rgba(255,105,180,.18);
    }
    @keyframes sw-pulse{
      0%,100%{box-shadow:0 0 22px rgba(255,105,180,.45),0 0 60px rgba(255,105,180,.22),inset 0 0 10px rgba(255,105,180,.06)}
      50%    {box-shadow:0 0 42px rgba(255,182,193,.85),0 0 100px rgba(255,105,180,.55),0 0 160px rgba(255,20,147,.25),inset 0 0 18px rgba(255,105,180,.14)}
    }
    .switch-lever {
      width:24px;height:40px;
      background:linear-gradient(160deg,#c060b0,#7030a0);
      border-radius:5px;
      border:1.5px solid rgba(255,210,235,.7);
      box-shadow:0 0 10px rgba(255,105,180,.6),0 0 22px rgba(255,20,147,.35);
      transition:transform .28s cubic-bezier(.34,1.56,.64,1);
    }
    .switch-wrap.flipped .switch-lever { transform:scaleY(-1); }
    .switch-label {
      font-size:.65rem;letter-spacing:3px;text-transform:uppercase;
      color:rgba(255,182,193,.75);
      text-shadow:0 0 8px rgba(255,105,180,.8);
    }

    /* ‚îÄ‚îÄ DARK ROOM FLOATING HEARTS ‚îÄ‚îÄ */
    .dark-heart-layer{position:absolute;inset:0;pointer-events:none;}
    .dark-heart{
      position:absolute;
      display:flex;flex-direction:column;align-items:center;
      pointer-events:none;
      animation:dark-heart-shimmer 3.5s ease-in-out infinite;
      animation-delay:var(--bfd,0s);
    }
    .dark-heart-body{
      width:60px;height:56px;
      clip-path:path('M 30 52 C 3 38 0 22 0 14 C 0 6 7 2 15 2 C 22 2 27 6 30 10 C 33 6 38 2 45 2 C 53 2 60 6 60 14 C 60 22 57 38 30 52 Z');
      background:rgba(255,160,195,.28);
    }
    @media(max-width:480px){
      .dark-heart-body{width:46px;height:43px;
        clip-path:path('M 23 40 C 2 29 0 17 0 11 C 0 5 5 2 11 2 C 17 2 21 5 23 8 C 25 5 29 2 35 2 C 41 2 46 5 46 11 C 46 17 44 29 23 40 Z');}
    }
    @keyframes dark-heart-shimmer{
      0%,100%{ filter:drop-shadow(0 0 14px rgba(255,182,193,.95))
                       drop-shadow(0 0 32px rgba(255,105,180,.72))
                       drop-shadow(0 0 65px rgba(255,50,110,.38)); }
      50%    { filter:drop-shadow(0 0 24px rgba(255,230,240,1))
                       drop-shadow(0 0 55px rgba(255,105,180,1))
                       drop-shadow(0 0 110px rgba(255,50,110,.65))
                       drop-shadow(0 0 5px rgba(255,255,255,.9)); }
    }

    /* ===================== FLASH OVERLAY ===================== */
    #flash {
      position:fixed;inset:0;z-index:850;pointer-events:none;
      background:radial-gradient(ellipse at center,#fff8ff 0%,#ffcce8 55%,#ff85b3 100%);
      opacity:0;transition:opacity .12s ease;
    }

    /* ===================== STREAMERS ===================== */
    .streamer {
      position:fixed;top:-80px;pointer-events:none;z-index:840;
      border-radius:3px;opacity:0;
    }
    @keyframes streamer-fall {
      0%   { transform:translateY(0)    rotate(0deg)   scaleX(1);   opacity:1; }
      12%  { opacity:1; }
      88%  { opacity:.7; }
      100% { transform:translateY(115vh) rotate(820deg) scaleX(.5); opacity:0; }
    }

    /* ===================== TRANSITION ===================== */
    #overlay{position:fixed;inset:0;z-index:500;background:var(--pink-mid);display:none;
      align-items:center;justify-content:center;font-size:4rem;opacity:0;transition:opacity .4s;}

    /* ===================== PAGE 2 ‚Äî ROOM ===================== */
    #page2{display:none;opacity:0;transition:opacity .8s;}

    .room{position:relative;width:100%;height:100%;overflow:hidden;background:#1a0610;}

    /* ‚îÄ‚îÄ SLIDESHOW LAYERS ‚îÄ‚îÄ */
    .slide{
      position:absolute;inset:0;
      overflow:hidden;
      opacity:0;
      transition:opacity 1.8s ease-in-out;
      z-index:1;
    }
    .slide.active{ opacity:1; }
    /* Blurred backdrop fills letterbox areas */
    .slide-blur{
      position:absolute;inset:-8%;
      width:116%;height:116%;
      object-fit:cover;
      filter:blur(22px) brightness(.6) saturate(1.3);
    }
    /* Full photo ‚Äî never cropped */
    .slide-img{
      position:absolute;inset:0;
      width:100%;height:100%;
      object-fit:contain;
    }

    /* Subtle vignette on top of slides */
    .room-vignette{
      position:absolute;inset:0;z-index:4;pointer-events:none;
      background:radial-gradient(ellipse 92% 92% at 50% 50%,transparent 40%,rgba(60,5,25,.28) 100%);
    }

    /* ‚îÄ‚îÄ BALLOONS ‚îÄ‚îÄ */
    .balloon-layer{position:absolute;inset:0;z-index:60;pointer-events:none;}
    .balloon{
      position:absolute;cursor:pointer;pointer-events:all;
      display:flex;flex-direction:column;align-items:center;
      animation:heart-glow-breathe 3.5s ease-in-out infinite;
      animation-delay:var(--bfd,0s);
      transition:transform .2s;
      user-select:none;
    }
    .balloon:hover{
      transform:scale(1.14);
      animation-play-state:paused;
      filter:drop-shadow(0 0 18px rgba(255,182,193,1)) drop-shadow(0 0 40px rgba(255,105,180,.8)) brightness(1.08);
    }
    /* ‚ù§Ô∏è Heart shape ‚Äî fixed 60√ó56 coordinate space */
    .balloon-body{
      width:60px;
      height:56px;
      clip-path:path('M 30 52 C 3 38 0 22 0 14 C 0 6 7 2 15 2 C 22 2 27 6 30 10 C 33 6 38 2 45 2 C 53 2 60 6 60 14 C 60 22 57 38 30 52 Z');
      background:radial-gradient(circle at 38% 32%, #ffe4f0, #ffb6d5);
      position:relative;
      display:flex;align-items:center;justify-content:center;
    }
    @media(max-width:480px){
      .balloon-body{
        width:46px;height:43px;
        clip-path:path('M 23 40 C 2 29 0 17 0 11 C 0 5 5 2 11 2 C 17 2 21 5 23 8 C 25 5 29 2 35 2 C 41 2 46 5 46 11 C 46 17 44 29 23 40 Z');
      }
    }
    .balloon-shine{
      position:absolute;top:18%;left:20%;width:26%;height:18%;
      background:rgba(255,255,255,.6);border-radius:50%;
      transform:rotate(-28deg);pointer-events:none;
    }
    .balloon-label{
      position:relative;z-index:1;
      font-family:'Dancing Script',cursive;font-size:clamp(.85rem,1.6vw,1.2rem);
      color:rgba(155,35,85,.95);text-align:center;
      text-shadow:0 1px 3px rgba(255,255,255,.8);line-height:1;font-weight:700;
    }
    .balloon-string{
      width:1.5px;height:clamp(28px,4.5vh,52px);
      background:linear-gradient(180deg,rgba(255,150,180,.7),rgba(255,150,180,.1));
    }
    /* Soft light emanating ‚Äî breathes with float */
    @keyframes heart-glow-breathe{
      0%,100%{ filter:drop-shadow(0 0 7px rgba(255,182,193,.88))
                       drop-shadow(0 0 18px rgba(255,105,180,.48)); }
      50%    { filter:drop-shadow(0 0 14px rgba(255,220,235,1))
                       drop-shadow(0 0 34px rgba(255,105,180,.78))
                       drop-shadow(0 0 7px rgba(255,255,255,.55)); }
    }
    @keyframes balloon-float{
      0%,100%{transform:translateY(0) rotate(-2deg)}
      28%    {transform:translateY(-15px) rotate(1.5deg)}
      58%    {transform:translateY(-8px) rotate(2.5deg)}
      82%    {transform:translateY(-19px) rotate(-1deg)}
    }

    /* ‚îÄ‚îÄ FALLING GLITTERS ‚îÄ‚îÄ */
    .glitter-layer{position:absolute;inset:0;pointer-events:none;overflow:hidden;z-index:5;}
    @keyframes glitter-fall{
      0%  {transform:translateY(-12px) rotate(0deg)   scale(.5); opacity:0;}
      8%  {opacity:1;}
      30% {transform:translateY(28vh)  rotate(120deg) scale(1.3);}
      55% {transform:translateY(55vh)  rotate(260deg) scale(.7); opacity:.8;}
      80% {transform:translateY(82vh)  rotate(420deg) scale(1.1);}
      100%{transform:translateY(112vh) rotate(580deg) scale(.4); opacity:0;}
    }

    /* ‚îÄ‚îÄ FIREFLIES ‚îÄ‚îÄ */
    .firefly-layer{position:absolute;inset:0;pointer-events:none;overflow:hidden;z-index:6;}
    @keyframes ff-blink{
      0%,100%{opacity:.12;}  20%{opacity:.95;}  40%{opacity:.3;}  65%{opacity:1;}  85%{opacity:.2;}
    }
    @keyframes ff-wander-a{
      0%  {transform:translate(0,0);}        20% {transform:translate(28px,-40px);}
      45% {transform:translate(-18px,-72px);}  68% {transform:translate(38px,-50px);}
      85% {transform:translate(12px,-28px);}  100%{transform:translate(0,0);}
    }
    @keyframes ff-wander-b{
      0%  {transform:translate(0,0);}        25% {transform:translate(-32px,-26px);}
      50% {transform:translate(-48px,-68px);}  75% {transform:translate(-22px,-40px);}
      100%{transform:translate(0,0);}
    }
    @keyframes ff-wander-c{
      0%  {transform:translate(0,0);}        22% {transform:translate(42px,-24px);}
      44% {transform:translate(58px,-54px);}  66% {transform:translate(32px,-84px);}
      85% {transform:translate(16px,-58px);}  100%{transform:translate(0,0);}
    }
    @keyframes ff-wander-d{
      0%  {transform:translate(0,0);}        30% {transform:translate(-26px,-48px);}
      58% {transform:translate(24px,-78px);}  80% {transform:translate(36px,-44px);}
      100%{transform:translate(0,0);}
    }
    @keyframes ff-wander-e{
      0%  {transform:translate(0,0);}        28% {transform:translate(16px,-33px);}
      52% {transform:translate(-12px,-64px);}  78% {transform:translate(-28px,-38px);}
      100%{transform:translate(0,0);}
    }

    /* ‚îÄ‚îÄ ROOM BANNER ‚îÄ‚îÄ */
    .room-banner{
      position:absolute;top:clamp(10px,2vh,20px);left:50%;transform:translateX(-50%);
      z-index:70;text-align:center;pointer-events:none;white-space:nowrap;
      background:linear-gradient(135deg,rgba(255,105,180,.18),rgba(199,21,133,.12));
      backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
      border:1px solid rgba(255,182,193,.3);
      border-radius:50px;
      padding:clamp(5px,1vh,10px) clamp(14px,3.5vw,28px);
      box-shadow:0 4px 20px rgba(255,105,180,.15),inset 0 1px 0 rgba(255,255,255,.15);
    }
    .room-banner-title{
      display:block;
      font-family:'Dancing Script',cursive;
      font-size:clamp(1rem,min(3vw,3.5vh),1.9rem);
      color:#e8006a;
      text-shadow:0 0 10px rgba(255,20,147,.8),0 0 24px rgba(255,20,147,.45),0 1px 0 rgba(255,255,255,.15);
      letter-spacing:2px;line-height:1.3;
    }
    .room-banner-hint{
      display:block;
      font-size:clamp(.55rem,min(1.4vw,1.8vh),.8rem);
      color:#c0005a;
      text-shadow:0 0 8px rgba(199,21,133,.5);
      letter-spacing:2.5px;text-transform:uppercase;margin-top:1px;
    }

    /* ‚îÄ‚îÄ LOCK BUTTON (top-right, reveals password modal) ‚îÄ‚îÄ */
    .lock-btn {
      position:fixed;top:clamp(14px,3vh,26px);right:clamp(14px,3vw,26px);
      z-index:200;
      width:50px;height:50px;border-radius:50%;
      background:linear-gradient(135deg,rgba(255,215,0,.92),rgba(184,134,11,.97));
      border:2px solid rgba(255,235,120,.55);
      color:#fff;font-size:1.35rem;
      display:none;align-items:center;justify-content:center;
      cursor:pointer;
      transition:transform .2s,box-shadow .2s;
      animation:lock-pulse 2.4s ease-in-out infinite;
    }
    .lock-btn:hover{transform:scale(1.12);box-shadow:0 6px 28px rgba(255,215,0,.7);}
    @keyframes lock-pulse{
      0%,100%{box-shadow:0 4px 20px rgba(255,215,0,.42)}
      50%    {box-shadow:0 4px 30px rgba(255,215,0,.78),0 0 0 8px rgba(255,215,0,.12)}
    }

    /* ‚îÄ‚îÄ MUSIC BUTTON ‚îÄ‚îÄ */
    .music-btn {
      position:fixed;bottom:clamp(14px,3vh,26px);right:clamp(14px,3vw,26px);
      z-index:200;
      width:50px;height:50px;border-radius:50%;
      background:linear-gradient(135deg,rgba(255,105,180,.92),rgba(199,21,133,.96));
      border:2px solid rgba(255,182,193,.5);
      color:#fff;font-size:1.4rem;
      display:none;align-items:center;justify-content:center;
      cursor:pointer;
      box-shadow:0 4px 20px rgba(255,20,147,.4);
      transition:transform .2s,box-shadow .2s;
    }
    .music-btn:hover{transform:scale(1.12);box-shadow:0 6px 28px rgba(255,20,147,.6);}
    .music-btn.playing{animation:music-pulse 1.8s ease-in-out infinite;}
    @keyframes music-pulse{
      0%,100%{box-shadow:0 4px 20px rgba(255,20,147,.4)}
      50%    {box-shadow:0 4px 32px rgba(255,20,147,.78),0 0 0 10px rgba(255,20,147,.1)}
    }

    /* ‚îÄ‚îÄ GAME BUTTON (top-left) ‚îÄ‚îÄ */
    .game-btn {
      position:fixed;top:clamp(14px,3vh,26px);left:clamp(14px,3vw,26px);
      z-index:200;
      width:50px;height:50px;border-radius:50%;
      background:linear-gradient(135deg,rgba(255,105,180,.92),rgba(199,21,133,.96));
      border:2px solid rgba(255,182,193,.5);
      color:#fff;font-size:1.5rem;
      display:none;align-items:center;justify-content:center;
      cursor:pointer;
      box-shadow:0 4px 20px rgba(255,20,147,.4);
      transition:transform .2s,box-shadow .2s;
      animation:game-btn-pulse 2s ease-in-out infinite;
    }
    .game-btn:hover{transform:scale(1.14);box-shadow:0 6px 28px rgba(255,20,147,.7);}
    @keyframes game-btn-pulse{
      0%,100%{box-shadow:0 4px 20px rgba(255,20,147,.4)}
      50%    {box-shadow:0 4px 32px rgba(255,20,147,.8),0 0 0 10px rgba(255,20,147,.1)}
    }

    /* ‚îÄ‚îÄ SCROLL BUTTON (bottom-left) ‚îÄ‚îÄ */
    .scroll-btn{
      position:fixed;bottom:clamp(14px,3vh,26px);left:clamp(14px,3vw,26px);
      z-index:200;
      width:50px;height:50px;border-radius:50%;
      background:linear-gradient(135deg,rgba(255,105,180,.92),rgba(199,21,133,.96));
      border:2px solid rgba(255,182,193,.5);
      color:#fff;font-size:1.5rem;
      display:none;align-items:center;justify-content:center;
      cursor:pointer;
      box-shadow:0 4px 20px rgba(255,20,147,.4);
      transition:transform .2s,box-shadow .2s;
      animation:game-btn-pulse 2.2s ease-in-out infinite;
    }
    .scroll-btn:hover{transform:scale(1.14);box-shadow:0 6px 28px rgba(255,20,147,.7);}


    /* ‚îÄ‚îÄ SCROLL OVERLAY ‚îÄ‚îÄ */
    .scroll-overlay{
      position:fixed;inset:0;z-index:500;
      background:rgba(15,3,8,.94);backdrop-filter:blur(8px);
      display:none;align-items:center;justify-content:center;
      padding:clamp(8px,2vw,20px);
    }
    .scroll-modal{
      position:relative;
      width:100%;max-width:640px;
      display:flex;flex-direction:column;
      max-height:92vh;
    }
    .scroll-close{
      position:absolute;top:-14px;right:-10px;
      z-index:10;
      width:34px;height:34px;border-radius:50%;
      background:linear-gradient(135deg,#c71585,#7b0044);
      border:2px solid rgba(255,182,193,.5);
      color:#fff;font-size:1rem;cursor:pointer;
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 2px 12px rgba(199,21,133,.5);
      transition:transform .15s;
    }
    .scroll-close:hover{transform:scale(1.15);}
    .scroll-roll{
      height:clamp(32px,5vw,52px);flex-shrink:0;
      background:radial-gradient(ellipse 100% 280% at 50% 50%,#f5d060 0%,#c8901a 30%,#8b5e0a 55%,#c8901a 75%,#f0c840 100%);
      border:1.5px solid rgba(80,50,5,.55);
      box-shadow:0 6px 18px rgba(0,0,0,.55),inset 0 2px 8px rgba(255,255,220,.2);
    }
    .scroll-roll.top{border-radius:10px 10px 0 0;border-bottom:none;}
    .scroll-roll.bot{border-radius:0 0 10px 10px;border-top:none;}
    .scroll-body{
      background:
        repeating-linear-gradient(0deg,transparent,transparent 30px,rgba(139,90,20,.05) 30px,rgba(139,90,20,.05) 31px),
        linear-gradient(170deg,#fdf3cc 0%,#f5e6a8 25%,#faeebb 50%,#eedfa0 75%,#f8ecc0 100%);
      border-left:2px solid rgba(100,65,5,.35);
      border-right:2px solid rgba(100,65,5,.35);
      padding:clamp(14px,3vw,28px) clamp(18px,5vw,44px);
      overflow-y:auto;
      flex:1;min-height:0;
      position:relative;
    }
    .scroll-body::before{
      content:'';position:absolute;inset:0;pointer-events:none;
      background:
        radial-gradient(ellipse 90% 40% at 50% 0%,rgba(139,90,20,.1) 0%,transparent 70%),
        radial-gradient(ellipse 90% 40% at 50% 100%,rgba(139,90,20,.1) 0%,transparent 70%);
    }
    .scroll-heading{
      font-family:'Cinzel',serif;
      font-size:clamp(1rem,3vw,1.5rem);
      text-align:center;letter-spacing:4px;
      color:#2a0e05;
      margin-bottom:1.4rem;
      text-shadow:1px 1px 0 rgba(255,220,100,.4);
    }
    .scroll-content{
      font-family:'Dancing Script',cursive;
      font-size:clamp(.95rem,2.2vw,1.15rem);
      line-height:2;
      white-space:pre-wrap;
      color:#2a0e05;
    }
    .sc{
      display:inline;
      color:#2a0e05;
      transition:color .35s ease, text-shadow .35s ease;
    }
    .sc.lit{
      color:#c4005a;
      text-shadow:0 0 7px rgba(255,20,147,.75),0 0 18px rgba(255,105,180,.4);
    }
    .sc.emoji{ font-style:normal; }

    /* ‚îÄ‚îÄ DIARY (SECRET ROOM) ‚îÄ‚îÄ */
    .diary-overlay{
      position:fixed;inset:0;z-index:600;
      background:rgba(8,1,5,.96);backdrop-filter:blur(12px);
      display:none;align-items:center;justify-content:center;
      padding:clamp(10px,3vw,28px);
    }
    .diary-close{
      position:fixed;top:16px;right:18px;z-index:10;
      width:34px;height:34px;border-radius:50%;
      background:linear-gradient(135deg,#c71585,#7b0044);
      border:2px solid rgba(255,182,193,.5);
      color:#fff;font-size:1rem;cursor:pointer;
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 2px 12px rgba(199,21,133,.5);
      transition:transform .15s;
    }
    .diary-close:hover{transform:scale(1.15);}
    .diary-book{
      position:relative;
      width:100%;max-width:680px;
      height:clamp(460px,84vh,680px);
      perspective:1300px;
    }
    /* ‚îÄ‚îÄ CLOSED COVER ‚îÄ‚îÄ */
    .diary-cover-wrap{
      position:absolute;inset:0;
      transform-origin:left center;
      transform-style:preserve-3d;
      transition:transform 1.1s cubic-bezier(.55,0,.1,1), opacity .6s ease .5s;
      z-index:5;
    }
    .diary-cover-wrap.flipped{
      transform:rotateY(-180deg);
      opacity:0;
      pointer-events:none;
    }
    .diary-cover-front{
      position:absolute;inset:0;
      background:linear-gradient(148deg,#420c1c 0%,#621525 20%,#3a0a10 45%,#5a1020 72%,#2c0810 100%);
      border-radius:5px 16px 16px 5px;
      border:2px solid rgba(160,50,70,.4);
      box-shadow:8px 0 24px rgba(0,0,0,.65),inset -5px 0 14px rgba(0,0,0,.45),0 0 50px rgba(160,20,50,.18);
      cursor:pointer;
      display:flex;align-items:center;justify-content:center;
      backface-visibility:hidden;
      overflow:hidden;
    }
    .diary-cover-front::before{
      content:'';position:absolute;inset:10px;
      border:1.5px solid rgba(180,60,80,.28);
      border-radius:3px 12px 12px 3px;pointer-events:none;
    }
    .diary-cover-front::after{
      content:'';position:absolute;inset:18px;
      border:1px solid rgba(180,60,80,.15);
      border-radius:2px 9px 9px 2px;pointer-events:none;
    }
    .diary-spine{
      position:absolute;top:0;left:0;bottom:0;width:24px;
      background:linear-gradient(90deg,#180406 0%,#380a12 50%,#260608 100%);
      border-radius:5px 0 0 5px;
      border-right:1px solid rgba(160,50,70,.35);
      box-shadow:inset -4px 0 10px rgba(0,0,0,.55);
    }
    .diary-strap{
      position:absolute;right:-14px;top:50%;transform:translateY(-50%);
      width:26px;height:44px;
      background:linear-gradient(90deg,#b8880e,#e8c830,#b8880e);
      border-radius:0 8px 8px 0;
      border:1px solid rgba(200,170,20,.45);
      box-shadow:0 0 10px rgba(200,160,20,.4);
    }
    .diary-strap::after{
      content:'';position:absolute;top:50%;left:50%;
      transform:translate(-50%,-50%);
      width:9px;height:9px;border-radius:50%;
      background:radial-gradient(circle at 35% 30%,#fffce0,#b8880e);
      box-shadow:0 0 6px rgba(200,160,20,.7);
    }
    .diary-cover-text{
      display:flex;flex-direction:column;align-items:center;gap:.7rem;
      padding-left:28px;
    }
    .diary-dear{
      font-family:'Dancing Script',cursive;
      font-size:clamp(2rem,6vw,3.4rem);
      color:#f0b8c4;
      text-shadow:0 0 20px rgba(255,80,120,.55),0 0 45px rgba(255,20,80,.2);
      letter-spacing:4px;
    }
    .diary-cover-heart{ font-size:1.8rem;animation:title-glow 2.4s ease-in-out infinite; }
    .diary-tap-hint{
      font-family:'Dancing Script',cursive;
      font-size:.82rem;color:rgba(240,184,196,.38);
      letter-spacing:2px;margin-top:.3rem;
    }
    /* ‚îÄ‚îÄ OPEN BOOK ‚îÄ‚îÄ */
    .diary-open{
      position:absolute;inset:0;
      display:flex;
      opacity:0;pointer-events:none;
      transition:opacity .9s ease;
      border-radius:5px 14px 14px 5px;
      overflow:hidden;
      box-shadow:0 10px 50px rgba(0,0,0,.7);
    }
    .diary-open.visible{opacity:1;pointer-events:all;}
    .diary-left-page{
      flex:0 0 34%;
      background:linear-gradient(170deg,#fdf8e8 0%,#f5e8c0 65%,#ede0a8 100%);
      border-right:3px solid rgba(200,80,100,.3);
      display:flex;align-items:center;justify-content:center;
      padding:20px 12px;position:relative;
    }
    .diary-left-page::before{
      content:'';position:absolute;inset:0;
      background:linear-gradient(90deg,rgba(0,0,0,.06) 0%,transparent 18%);
      pointer-events:none;
    }
    .diary-left-decor{
      display:flex;flex-direction:column;align-items:center;gap:10px;
    }
    .diary-deco-flowers{font-size:2rem;line-height:1.5;text-align:center;}
    .diary-deco-rule{
      width:55px;height:1.5px;
      background:linear-gradient(90deg,transparent,rgba(160,50,70,.5),transparent);
      margin:4px 0;
    }
    .diary-deco-quote{
      font-family:'Dancing Script',cursive;
      font-size:.78rem;color:rgba(90,25,40,.55);
      text-align:center;line-height:1.6;letter-spacing:.5px;
    }
    .diary-right-page{
      flex:1;
      background:
        repeating-linear-gradient(0deg,transparent,transparent 27px,rgba(100,140,210,.2) 27px,rgba(100,140,210,.2) 28.5px),
        linear-gradient(170deg,#fefcf2 0%,#fdf8e8 55%,#f8f0d8 100%);
      padding:22px 18px 22px 40px;
      overflow-y:auto;position:relative;
    }
    .diary-margin-line{
      position:absolute;top:0;bottom:0;left:32px;
      width:1.5px;background:rgba(210,60,80,.4);
    }
    .diary-letter{
      font-family:'Dancing Script',cursive;
      font-size:clamp(.88rem,2vw,1.05rem);
      line-height:28px;
      white-space:pre-wrap;
      color:#2e0a14;
    }
    .dlc{
      display:inline;color:#2e0a14;
      transition:color .38s ease,text-shadow .38s ease;
    }
    .dlc.lit{
      color:#8c0038;
      text-shadow:0 0 8px rgba(180,0,70,.7),0 0 18px rgba(220,60,100,.35);
    }
    @media(max-width:500px){
      .diary-left-page{display:none;}
      .diary-right-page{padding-left:34px;}
    }

    /* ‚îÄ‚îÄ SCROLL BIRTHDAY CAKE ‚îÄ‚îÄ */
    .cake-wrap{
      display:flex;flex-direction:column;align-items:center;
      margin:.6rem auto 1rem;
    }
    .cake-glow-ring{
      animation:cake-aura 1.4s ease-in-out infinite alternate;
    }
    @keyframes cake-aura{
      from{filter:drop-shadow(0 0 6px rgba(255,160,0,.75)) drop-shadow(0 0 14px rgba(255,105,180,.35));}
      to  {filter:drop-shadow(0 0 14px rgba(255,215,0,1))  drop-shadow(0 0 28px rgba(255,105,180,.6));}
    }
    .cake-flame{
      width:11px;height:20px;
      background:radial-gradient(ellipse at 50% 95%,#fff 0%,#ffe566 28%,#ff9500 62%,transparent 100%);
      border-radius:50% 50% 30% 30% / 60% 60% 40% 40%;
      transform-origin:bottom center;
      animation:flame-flicker .55s ease-in-out infinite alternate;
    }
    @keyframes flame-flicker{
      0%  {transform:scaleX(1)    scaleY(1)    rotate(-4deg);opacity:1;}
      35% {transform:scaleX(.72)  scaleY(1.18) rotate(3deg); opacity:.92;}
      70% {transform:scaleX(1.12) scaleY(.88)  rotate(-2deg);opacity:.88;}
      100%{transform:scaleX(.88)  scaleY(1.06) rotate(2deg); opacity:1;}
    }
    .cake-candle{
      width:9px;height:26px;
      background:linear-gradient(90deg,#ffd0e8 0%,#ffb6d5 45%,#ff85b3 75%,#ffcce8 100%);
      border-radius:2px 2px 1px 1px;
    }
    .cake-tier1{
      width:66px;height:17px;
      background:linear-gradient(180deg,#ffd8ec,#ffb0d5);
      border-radius:4px 4px 0 0;
      border:1.5px solid rgba(255,105,180,.45);
      position:relative;overflow:visible;
      display:flex;align-items:center;justify-content:center;
    }
    .cake-tier1::before{
      content:'';position:absolute;top:-5px;left:6px;right:6px;height:7px;
      background:repeating-linear-gradient(90deg,rgba(255,255,255,.9) 0,rgba(255,255,255,.9) 5px,transparent 5px,transparent 9px);
      border-radius:3px;
    }
    .cake-tier2{
      width:84px;height:36px;
      background:linear-gradient(180deg,#ff85b3 0%,#d4005a 100%);
      border:1.5px solid rgba(220,0,80,.35);border-top:none;
      display:flex;align-items:center;justify-content:center;gap:9px;
    }
    .cake-dot{
      width:7px;height:7px;border-radius:50%;
      background:radial-gradient(circle at 35% 30%,#fff,#ffd0e8);
      box-shadow:0 0 5px rgba(255,182,193,.9);
    }
    .cake-base{
      width:94px;height:7px;
      background:linear-gradient(180deg,#ffb8d4,#ff7aaa);
      border-radius:0 0 6px 6px;
      border:1px solid rgba(255,105,180,.3);border-top:none;
    }

    /* ‚îÄ‚îÄ GAME OVERLAY ‚îÄ‚îÄ */
    .game-overlay{
      position:fixed;inset:0;z-index:500;
      background:rgba(30,0,18,.88);backdrop-filter:blur(6px);
      display:none;align-items:center;justify-content:center;
      padding:clamp(12px,3vw,28px);
    }
    .game-modal{
      background:linear-gradient(160deg,#2a041a 0%,#3d0826 55%,#1e0212 100%);
      border:2px solid rgba(255,105,180,.35);
      border-radius:22px;
      box-shadow:0 0 60px rgba(255,20,147,.3),0 0 120px rgba(255,20,147,.1);
      width:100%;max-width:520px;
      padding:clamp(18px,4vw,32px);
      position:relative;
      display:flex;flex-direction:column;align-items:center;gap:clamp(10px,2vh,18px);
      max-height:94vh;overflow-y:auto;
    }
    .game-close{
      position:absolute;top:12px;right:14px;
      background:none;border:none;color:rgba(255,182,193,.7);
      font-size:1.4rem;cursor:pointer;line-height:1;
      transition:color .15s,transform .15s;
    }
    .game-close:hover{color:#fff;transform:scale(1.2);}
    .game-title{
      font-family:'Dancing Script',cursive;
      font-size:clamp(1.3rem,4.5vw,2rem);
      color:#ffc0cb;
      text-shadow:0 0 14px #ff1493,0 0 30px rgba(255,105,180,.5);
      text-align:center;margin:0;letter-spacing:2px;
    }
    .game-subtitle{
      font-family:'Dancing Script',cursive;
      font-size:clamp(.85rem,2.5vw,1.1rem);
      color:rgba(255,182,193,.7);margin:0;text-align:center;
    }
    .game-bubbles{
      display:flex;flex-wrap:wrap;justify-content:center;
      gap:clamp(12px,2.5vw,20px);
      width:100%;padding:4px 0;
    }
    .game-bubble{
      width:clamp(88px,18vw,115px);height:clamp(88px,18vw,115px);
      border-radius:50%;
      background:radial-gradient(circle at 35% 30%,rgba(255,220,235,.18),rgba(199,21,133,.22));
      border:2.5px solid rgba(255,105,180,.5);
      box-shadow:0 0 16px rgba(255,105,180,.35),inset 0 0 12px rgba(255,182,193,.08);
      cursor:pointer;
      display:flex;align-items:center;justify-content:center;
      overflow:hidden;
      transition:transform .15s,box-shadow .15s;
      position:relative;
      user-select:none;
    }
    .game-bubble:hover{
      transform:scale(1.08);
      box-shadow:0 0 28px rgba(255,105,180,.7),inset 0 0 14px rgba(255,182,193,.12);
    }
    .game-bubble img{width:100%;height:100%;object-fit:cover;pointer-events:none;}
    .game-bubble .duck-emoji{font-size:clamp(2.8rem,7vw,3.8rem);pointer-events:none;}
    .game-bubble.shot{animation:bubble-shot .5s ease forwards;}
    @keyframes bubble-shot{
      0%{transform:scale(1)}
      30%{transform:scale(1.25);filter:brightness(2) saturate(0);}
      100%{transform:scale(0.7);opacity:.4;filter:brightness(.7);}
    }
    .game-msg{
      font-family:'Dancing Script',cursive;
      font-size:clamp(1.1rem,3.5vw,1.5rem);
      text-align:center;min-height:2rem;
      transition:opacity .3s;
    }
    .game-msg.wrong{color:#ff6b6b;text-shadow:0 0 10px rgba(255,80,80,.6);}
    .game-msg.correct{color:#7dff94;text-shadow:0 0 12px rgba(80,255,100,.55);}
    .game-win{display:flex;flex-direction:column;align-items:center;gap:16px;width:100%;}
    .game-win-text{
      font-family:'Dancing Script',cursive;
      font-size:clamp(1.3rem,4vw,1.8rem);
      color:#ffc0cb;text-align:center;
      text-shadow:0 0 16px #ff1493;
      animation:title-glow 2.4s ease-in-out infinite;
    }
    .game-win-img{
      width:clamp(200px,60vw,320px);
      height:clamp(200px,60vw,320px);
      object-fit:cover;border-radius:16px;
      border:3px solid rgba(255,105,180,.55);
      box-shadow:0 0 40px rgba(255,20,147,.45),0 0 80px rgba(255,20,147,.2);
      animation:win-img-pop .5s cubic-bezier(.18,1.4,.4,1) forwards;
    }
    @keyframes win-img-pop{
      0%{transform:scale(0.4);opacity:0}
      100%{transform:scale(1);opacity:1}
    }
    /* Shoot crosshair splash */
    .shoot-effect{
      position:fixed;pointer-events:none;z-index:999;
      width:60px;height:60px;
      transform:translate(-50%,-50%);
      animation:shoot-burst .5s ease forwards;
    }
    .shoot-effect::before,.shoot-effect::after{
      content:'';position:absolute;inset:0;border-radius:50%;
      border:3px solid rgba(255,80,80,.9);
    }
    .shoot-effect::after{border-color:rgba(255,220,0,.7);transform:scale(.55);}
    .shoot-ring{
      position:absolute;inset:0;
      border:2px solid rgba(255,150,150,.8);
      border-radius:50%;
    }
    @keyframes shoot-burst{
      0%{transform:translate(-50%,-50%) scale(0);opacity:1}
      60%{transform:translate(-50%,-50%) scale(1.4);opacity:.85}
      100%{transform:translate(-50%,-50%) scale(2.2);opacity:0}
    }

    /* ===================== MESSAGE MODAL ===================== */
    .msg-overlay{display:none;position:fixed;inset:0;z-index:900;align-items:center;justify-content:center;}
    .msg-overlay.show{display:flex;}
    .msg-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.58);backdrop-filter:blur(7px);}
    .msg-card{
      position:relative;background:linear-gradient(145deg,#fff8fb,#ffe4f2);
      border:3px solid var(--pink-mid);border-radius:22px;padding:2.5rem 2.5rem 2rem;
      max-width:520px;width:92%;
      box-shadow:0 25px 70px rgba(255,105,180,.35),0 0 0 1px rgba(255,182,193,.4);
      animation:card-pop .4s cubic-bezier(.34,1.56,.64,1);}
    @keyframes card-pop{from{transform:scale(.4) rotate(-8deg);opacity:0}to{transform:scale(1) rotate(0);opacity:1}}
    .msg-close{position:absolute;top:1rem;right:1rem;background:var(--pink-mid);border:none;color:#fff;
      width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:1rem;font-weight:700;
      display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px rgba(0,0,0,.2);
      transition:background .2s,transform .2s;}
    .msg-close:hover{background:var(--pink-hot);transform:scale(1.1);}
    .msg-big-emoji{font-size:3.5rem;text-align:center;margin-bottom:.8rem;}
    .msg-big-img{
      width:clamp(80px,28vw,140px);height:clamp(80px,28vw,140px);
      border-radius:50%;object-fit:cover;
      border:3px solid rgba(255,105,180,.55);
      box-shadow:0 0 22px rgba(255,20,147,.35),0 0 50px rgba(255,20,147,.15);
      display:block;margin:0 auto .8rem;
    }
    .msg-from{font-family:'Dancing Script',cursive;font-size:1.4rem;color:var(--pink-deep);margin-bottom:.8rem;}
    .msg-divider{height:2px;background:linear-gradient(90deg,transparent,var(--pink-light),transparent);margin-bottom:1rem;}
    .msg-text{font-size:1rem;color:#555;line-height:1.75;white-space:pre-wrap;max-height:50vh;overflow-y:auto;}
    .msg-text::-webkit-scrollbar{width:4px;}
    .msg-text::-webkit-scrollbar-thumb{background:var(--pink-light);border-radius:2px;}

    /* ===================== PASSWORD MODAL ===================== */
    .pw-overlay{display:none;position:fixed;inset:0;z-index:900;align-items:center;justify-content:center;}
    .pw-overlay.show{display:flex;}
    .pw-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.72);backdrop-filter:blur(8px);}
    .pw-card{
      position:relative;background:linear-gradient(160deg,#1a0520,#2d0a3a);
      border:2px solid var(--pink-hot);border-radius:18px;padding:2.5rem 2rem 2rem;
      max-width:380px;width:90%;text-align:center;
      box-shadow:0 0 60px rgba(255,20,147,.25),0 25px 60px rgba(0,0,0,.5);
      animation:card-pop .35s cubic-bezier(.34,1.56,.64,1);}
    .pw-lock{font-size:3rem;margin-bottom:.5rem;}
    .pw-title{font-family:'Dancing Script',cursive;font-size:1.6rem;color:var(--pink-mid);margin-bottom:.3rem;}
    .pw-sub{color:rgba(255,182,193,.65);font-size:.82rem;margin-bottom:1.5rem;}
    .pw-input{width:100%;padding:.75rem 1rem;background:rgba(255,255,255,.08);border:2px solid var(--pink-hot);
      border-radius:12px;color:#fff;font-size:1.1rem;text-align:center;letter-spacing:4px;outline:none;
      transition:border-color .2s,box-shadow .2s;}
    .pw-input:focus{border-color:#ff85c8;box-shadow:0 0 20px rgba(255,20,147,.3);}
    .pw-btn{margin-top:1rem;padding:.75rem 2.5rem;background:linear-gradient(135deg,var(--pink-hot),var(--pink-deep));
      border:none;border-radius:12px;color:#fff;cursor:pointer;font-family:'Dancing Script',cursive;font-size:1.1rem;
      transition:transform .2s,box-shadow .2s;}
    .pw-btn:hover{transform:scale(1.06);box-shadow:0 6px 20px rgba(255,20,147,.4);}
    .pw-error{color:#ff6b6b;font-size:.82rem;margin-top:.6rem;opacity:0;transition:opacity .3s;min-height:1.2em;}
    .pw-error.show{opacity:1;}
    .pw-close{position:absolute;top:.8rem;right:.9rem;background:none;border:none;color:var(--pink-mid);font-size:1.4rem;cursor:pointer;}
  </style>
</head>
<body>

<!-- Background music ‚Äî put song.mp3 in the same folder -->
<audio id="bgMusic" src="song.mp3" loop preload="auto"></audio>

<div id="overlay">‚ú®</div>
<div id="flash"></div>
<!-- Persistent glowing title ‚Äî visible in dark room and lit room, fades on switch flip -->
<div id="siteTitle">‚ú® Happy Birthday PPP ‚ú®</div>

<!-- Music toggle button (visible in room) -->
<button class="music-btn" id="musicBtn" onclick="toggleMusic()">üéµ</button>
<!-- Lock button top-right (visible in room) -->
<button class="lock-btn" id="lockBtn" onclick="lockBtnClick(event)">üîê</button>
<!-- Game button top-left (visible in room) -->
<button class="game-btn" id="gameBtn" onclick="openGame()">üéØ</button>
<!-- Scroll button bottom-left (visible in room) -->
<button class="scroll-btn" id="scrollBtn" onclick="openScroll()">üìú</button>

<!-- Scroll message overlay -->
<div class="scroll-overlay" id="scrollOverlay">
  <div class="scroll-modal">
    <button class="scroll-close" onclick="closeScroll()">‚úï</button>
    <div class="scroll-roll top"></div>
    <div class="scroll-body">
      <div class="cake-glow-ring"><div class="cake-wrap">
        <div class="cake-flame"></div>
        <div class="cake-candle"></div>
        <div class="cake-tier1"></div>
        <div class="cake-tier2">
          <div class="cake-dot"></div><div class="cake-dot"></div><div class="cake-dot"></div>
        </div>
        <div class="cake-base"></div>
      </div></div>
      <div class="scroll-heading">‚ú¶ A MESSAGE FOR PPP ‚ú¶</div>
      <div class="scroll-content" id="scrollContent"></div>
      <div class="cake-glow-ring"><div class="cake-wrap">
        <div class="cake-flame"></div>
        <div class="cake-candle"></div>
        <div class="cake-tier1"></div>
        <div class="cake-tier2">
          <div class="cake-dot"></div><div class="cake-dot"></div><div class="cake-dot"></div>
        </div>
        <div class="cake-base"></div>
      </div></div>
    </div>
    <div class="scroll-roll bot"></div>
  </div>
</div>

<!-- Duck face game overlay -->
<div class="game-overlay" id="gameOverlay">
  <div class="game-modal">
    <button class="game-close" onclick="closeGame()">‚úï</button>
    <div class="game-title">üéØ shoot the real duck face ü¶Ü</div>
    <div class="game-subtitle">find the human duck ‚Äî shoot wisely!</div>
    <div class="game-bubbles" id="gameBubbles"></div>
    <div class="game-msg" id="gameMsg"></div>
  </div>
</div>

<!-- ============================================================
     PAGE 1 ‚Äî THE DOOR
============================================================ -->
<div id="page1" class="page">
  <div class="p1-title">‚ú® Happy Birthday PPP ‚ú®</div>
  <!-- Dreamy clouds -->
  <div class="gate-cloud" style="width:200px;height:85px;top:7%;left:2%;--cd:22s;--cx:40px;--cy:-12px;opacity:.75;"></div>
  <div class="gate-cloud" style="width:240px;height:95px;top:14%;right:1%;--cd:28s;--cx:-45px;--cy:10px;opacity:.68;"></div>
  <div class="gate-cloud" style="width:150px;height:65px;bottom:16%;left:4%;--cd:19s;--cx:28px;--cy:-20px;opacity:.58;"></div>
  <div class="gate-cloud" style="width:180px;height:75px;bottom:20%;right:3%;--cd:25s;--cx:-35px;--cy:14px;opacity:.62;"></div>
  <div class="gate-cloud" style="width:130px;height:55px;top:40%;left:0%;--cd:21s;--cx:22px;--cy:-8px;opacity:.48;"></div>
  <div class="gate-cloud" style="width:110px;height:48px;top:30%;right:0%;--cd:17s;--cx:-18px;--cy:6px;opacity:.45;"></div>
  <!-- Gate scene -->
  <div class="gate-scene">
    <div class="gate-wrap" onclick="handleDoorClick()">
      <!-- Crown + raised medallion -->
      <div class="gate-crown">
        <div class="gate-medallion">‚úø</div>
        <span class="gate-crown-orn">‚Äî ‚ú¶ &nbsp; P P P &nbsp; ‚ú¶ ‚Äî</span>
      </div>
      <!-- Side pillars -->
      <div class="gate-post gate-post-l"></div>
      <div class="gate-post gate-post-r"></div>
      <!-- Center post with hinges -->
      <div class="gate-center-post">
        <div class="gate-hinge gate-hinge-t"></div>
        <div class="gate-hinge gate-hinge-m"></div>
        <div class="gate-hinge gate-hinge-b"></div>
      </div>
      <!-- Left solid panel -->
      <div class="gate-panel gate-panel-l" id="gatePanelL">
        <div class="gate-panel-front">
          <div class="gate-inset gate-inset-top"><span class="gate-ornament">‚úæ</span></div>
          <div class="gate-inset gate-inset-bot"><span class="gate-ornament-sm">‚óà</span></div>
        </div>
      </div>
      <!-- Right solid panel -->
      <div class="gate-panel gate-panel-r" id="gatePanelR">
        <div class="gate-panel-front">
          <div class="gate-inset gate-inset-top"><span class="gate-ornament">‚úæ</span></div>
          <div class="gate-inset gate-inset-bot"><span class="gate-ornament-sm">‚óà</span></div>
        </div>
      </div>
    </div>
  </div>
  <div class="p1-hint">‚ú® click the gates to enter ‚ú®</div>
</div>

<!-- ============================================================
     PAGE 1.5 ‚Äî DARK ROOM (light switch)
============================================================ -->
<div id="page15" class="page">
  <div class="dark-heart-layer" id="darkHeartLayer"></div>
  <div class="glitter-layer" id="darkGlitters"></div>
  <div class="firefly-layer" id="darkFireflies"></div>
  <div class="switch-wrap" id="switchWrap" onclick="flipSwitch()">
    <div class="switch-plate">
      <div class="switch-lever" id="switchLever"></div>
    </div>
    <div class="switch-label">lights</div>
  </div>
</div>

<!-- ============================================================
     PAGE 2 ‚Äî PINK PARADISE  (crossfading slideshow)
     Save images as: room1.jpg  room2.jpg  room3.jpg  room4.jpg
============================================================ -->
<div id="page2" class="page">
  <div class="room">
    <div class="slide" id="slide0"></div>
    <div class="slide" id="slide1"></div>
    <div class="slide" id="slide2"></div>
    <div class="slide" id="slide3"></div>
    <div class="glitter-layer" id="roomGlitters"></div>
    <div class="firefly-layer" id="roomFireflies"></div>
    <div class="room-vignette"></div>
    <div class="room-banner">
      <span class="room-banner-title">‚ú® Happy Birthday PPP ‚ú®</span>
      <span class="room-banner-hint">click on the hearts for greetings üíï</span>
    </div>
    <div class="balloon-layer" id="balloonLayer"></div>
  </div>
</div>

<!-- ============================================================
     MESSAGE MODAL
============================================================ -->
<div class="msg-overlay" id="msgModal">
  <div class="msg-backdrop" onclick="closeMsgModal()"></div>
  <div class="msg-card">
    <button class="msg-close" onclick="closeMsgModal()">‚úï</button>
    <div class="msg-big-emoji" id="msgEmoji"></div>
    <div class="msg-from"     id="msgFrom"></div>
    <div class="msg-divider"></div>
    <div class="msg-text"     id="msgText"></div>
  </div>
</div>

<!-- ============================================================
     PASSWORD MODAL
============================================================ -->
<div class="pw-overlay" id="pwModal">
  <div class="pw-backdrop" onclick="closePwModal()"></div>
  <div class="pw-card">
    <button class="pw-close" onclick="closePwModal()">‚úï</button>
    <div class="pw-lock">üîê</div>
    <div class="pw-title">Secret Room</div>
    <div class="pw-sub">Enter the password to unlock a secret surprise‚Ä¶</div>
    <input class="pw-input" id="pwInput" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="off"
      onkeydown="if(event.key==='Enter')checkPw()">
    <div><button class="pw-btn" onclick="checkPw()">Enter ‚ú®</button></div>
    <div class="pw-error" id="pwError">Hmm‚Ä¶ wrong password! Try again üíî</div>
  </div>
</div>

<!-- ============================================================
     DIARY (SECRET ROOM)
============================================================ -->
<div class="diary-overlay" id="diaryOverlay">
  <button class="diary-close" onclick="closeDiary()">‚úï</button>
  <div class="diary-book">
    <!-- Closed cover -->
    <div class="diary-cover-wrap" id="diaryCoverWrap">
      <div class="diary-cover-front" onclick="flipDiaryOpen()">
        <div class="diary-spine"></div>
        <div class="diary-strap"></div>
        <div class="diary-cover-text">
          <div class="diary-dear">Dear Diary</div>
          <div class="diary-cover-heart">üíñ</div>
          <div class="diary-tap-hint">tap to open</div>
        </div>
      </div>
    </div>
    <!-- Open book -->
    <div class="diary-open" id="diaryOpen">
      <div class="diary-left-page">
        <div class="diary-left-decor">
          <div class="diary-deco-flowers">üå∏<br>üíó<br>üå∏</div>
          <div class="diary-deco-rule"></div>
          <div class="diary-deco-quote">a letter<br>from<br>the heart</div>
          <div class="diary-deco-rule"></div>
          <div class="diary-deco-flowers">‚ú¶</div>
        </div>
      </div>
      <div class="diary-right-page">
        <div class="diary-margin-line"></div>
        <div class="diary-letter" id="diaryContent"></div>
      </div>
    </div>
  </div>
</div>

<script>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   GREETING MESSAGES  ‚Üê replace with real messages!
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const GREETINGS = [
  { from:"Snooty ‚ù§Ô∏è", emoji:"üéâ", image:"https://media1.tenor.com/m/fybqZRlk8YIAAAAC/dorothy-blink.gif", color:["#ff85b3","#e8005a"],
    message:"Hey there BESTIE, i hope you have a lovely year ahead. Even though you re dumb af, i still appreciate you. JK, i dont think you are dumb. I think you are secretly a genius. Happy birthday and thanks for being there for me always. and i hope u enjoy this website. ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è" },
  { from:"Friend 2 üíñ", emoji:"üéÇ", color:["#ffb6c1","#d04070"],
    message:"Hey PPP! Happy Birthday! üå∏\n\n‚úèÔ∏è Replace with your real message!\n\nYou are amazing! ‚ú®" },
  { from:"Friend 3 üå∑", emoji:"ü•≥", color:["#ff69b4","#a00058"],
    message:"PPP!! Happy Birthday! üéä\n\n‚úèÔ∏è Replace with your real message!\n\nAnother year of being fabulous! üëë" },
  { from:"Friend 4 üíù", emoji:"ü¶ã", color:["#ffc8d8","#c05080"],
    message:"Wishing my bestie the best birthday! üíï\n\n‚úèÔ∏è Replace with your real message!\n\nYou deserve everything! üå∑" },
  { from:"Friend 5 üéÄ", emoji:"üåπ", color:["#ff1493","#700035"],
    message:"Happy Birthday PPP! üíñ\n\n‚úèÔ∏è Replace with your real message!\n\nHere's to another year! ü•Ç" },
  { from:"Friend 6 ‚ú®", emoji:"üëë", color:["#d4a0ff","#7000cc"],
    message:"Queen PPP! Happy Birthday! üë∏\n\n‚úèÔ∏è Replace with your real message!\n\nMay your day be as beautiful as you are! üå∑" },
];

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SECRET PASSWORD
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const SECRET_PASSWORD = "pumpumpum";

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   BALLOON POSITIONS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const BALLOON_POS = [
  [5,  12],
  [22, 7],
  [46, 5],
  [68, 9],
  [11, 40],
  [78, 28],
];
const LOCKED_POS = [84, 12];

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   PAGE 1 ‚Äî particles
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
(function(){
  const p=document.getElementById('page1');
  const chars=['üíó','üíï','‚ú®','üå∏','üíñ','üéÄ','üå∑','‚≠ê','üéä','ü©∑','üí´','üéà'];
  for(let i=0;i<30;i++){
    const el=document.createElement('div'); el.className='p1-particle';
    el.textContent=chars[i%chars.length];
    el.style.left=Math.random()*100+'vw';
    el.style.fontSize=(.7+Math.random()*1.4)+'rem';
    el.style.animationDuration=(4+Math.random()*6)+'s';
    el.style.animationDelay=(Math.random()*8)+'s';
    p.appendChild(el);
  }
})();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DOOR ‚Üí DARK ROOM
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let doorOpened=false;
function handleDoorClick(){
  if(doorOpened)return; doorOpened=true;
  document.getElementById('gatePanelL').classList.add('open');
  document.getElementById('gatePanelR').classList.add('open');
  setTimeout(goToDarkRoom, 1900);
}

function goToDarkRoom(){
  const p1=document.getElementById('page1');
  const p15=document.getElementById('page15');
  p1.style.opacity='0';
  setTimeout(()=>{
    p1.style.display='none';
    buildDarkHearts();
    startGlitters('darkGlitters', true);
    startFireflies('darkFireflies', true);
    p15.style.display='block';
    requestAnimationFrame(()=>requestAnimationFrame(()=>{
      p15.style.opacity='1';
      // Fade in the persistent title banner
      const siteTitle=document.getElementById('siteTitle');
      siteTitle.classList.add('visible');
    }));
  }, 700);
}

function startGlitters(containerId, isDark){
  const container=document.getElementById(containerId);
  const litColors=['#ffd700','#ffffff','#ffb6c1','#ffe566','#e8e8ff','#ff85b3','#c8f0ff','#fff0a0'];
  const darkColors=['rgba(255,210,230,.55)','rgba(255,182,193,.45)','rgba(255,255,255,.35)','rgba(255,160,190,.4)'];
  const colors=isDark?darkColors:litColors;
  const count=isDark?28:48;
  for(let i=0;i<count;i++){
    const el=document.createElement('div');
    const size=isDark?(1+Math.random()*2):(1.5+Math.random()*3.5);
    const left=Math.random()*100;
    const delay=Math.random()*10;
    const dur=(isDark?6:4.5)+Math.random()*5;
    const color=colors[Math.floor(Math.random()*colors.length)];
    const shape=Math.random()>.55?'50%':'2px';
    el.style.cssText=`
      position:absolute;left:${left}%;top:-10px;
      width:${size}px;height:${size}px;
      background:${color};
      border-radius:${shape};
      animation:glitter-fall ${dur}s ${delay}s linear infinite;
      ${isDark?'filter:drop-shadow(0 0 3px rgba(255,182,193,.7));':'filter:drop-shadow(0 0 4px rgba(255,220,100,.9));'}
    `;
    container.appendChild(el);
  }
}

function startFireflies(containerId, isDark){
  const container=document.getElementById(containerId);
  const wanders=['ff-wander-a','ff-wander-b','ff-wander-c','ff-wander-d','ff-wander-e'];
  const darkColors=['rgba(255,220,140,.95)','rgba(255,195,100,.9)','rgba(255,182,193,.85)','rgba(255,245,180,.9)','rgba(200,255,210,.7)'];
  const litColors=['#ffd700','#ff85b3','#ffecb3','#ffffff','#ffc0cb','#ffe566','#ffb347'];
  const colors=isDark?darkColors:litColors;
  const count=isDark?50:35;
  for(let i=0;i<count;i++){
    const el=document.createElement('div');
    const size=isDark?(1.5+Math.random()*2.5):(1.8+Math.random()*3);
    const left=Math.random()*100;
    const top=Math.random()*100;
    const wander=wanders[Math.floor(Math.random()*wanders.length)];
    const wanderDur=5+Math.random()*8;
    const blinkDur=1.4+Math.random()*2.2;
    const delay=Math.random()*9;
    const color=colors[Math.floor(Math.random()*colors.length)];
    const glow=isDark
      ?`0 0 5px 2px ${color},0 0 12px 4px rgba(255,180,80,.45)`
      :`0 0 5px 2px ${color},0 0 14px 5px rgba(255,200,50,.5)`;
    el.style.cssText=`
      position:absolute;left:${left}%;top:${top}%;
      width:${size}px;height:${size}px;border-radius:50%;
      background:${color};box-shadow:${glow};
      animation:${wander} ${wanderDur}s ${delay}s ease-in-out infinite,
                ff-blink ${blinkDur}s ${delay*.4}s ease-in-out infinite;
      pointer-events:none;
    `;
    container.appendChild(el);
  }
}

function buildDarkHearts(){
  const layer=document.getElementById('darkHeartLayer');
  const movers=[];
  BALLOON_POS.forEach((pos)=>{
    const bf=2.5+Math.random()*2.2;
    const bfd=Math.random()*3;
    const div=document.createElement('div');
    div.className='dark-heart';
    div.style.cssText=`--bf:${bf}s;--bfd:${bfd}s;`;
    div.innerHTML='<div class="dark-heart-body"></div>';
    layer.appendChild(div);
    const angle=Math.random()*Math.PI*2;
    const speed=0.05+Math.random()*0.07;
    const x=pos[0]+(Math.random()-.5)*5;
    const y=pos[1]+(Math.random()-.5)*5;
    div.style.left=x+'%';
    div.style.top=y+'%';
    movers.push({el:div,x,y,vx:Math.cos(angle)*speed,vy:Math.sin(angle)*speed});
  });
  (function tick(){
    movers.forEach(b=>{
      b.x+=b.vx; b.y+=b.vy;
      if(b.x<2){b.x=2;b.vx=Math.abs(b.vx);}
      if(b.x>88){b.x=88;b.vx=-Math.abs(b.vx);}
      if(b.y<1){b.y=1;b.vy=Math.abs(b.vy);}
      if(b.y>86){b.y=86;b.vy=-Math.abs(b.vy);}
      b.el.style.left=b.x+'%';
      b.el.style.top=b.y+'%';
    });
    requestAnimationFrame(tick);
  })();
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   LIGHT SWITCH ‚Üí CELEBRATION ‚Üí ROOM
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let switchFlipped=false;
function flipSwitch(){
  if(switchFlipped)return; switchFlipped=true;

  // Flip the lever
  document.getElementById('switchWrap').classList.add('flipped');

  // Slowly fade out the persistent title banner
  const siteTitle=document.getElementById('siteTitle');
  siteTitle.style.transition='opacity 2.8s ease';
  siteTitle.style.opacity='0';

  // Big flash
  const flash=document.getElementById('flash');
  flash.style.opacity='1';

  // Streamers burst
  setTimeout(spawnStreamers, 60);

  // Fade flash and transition to room
  setTimeout(()=>{
    flash.style.transition='opacity .65s ease';
    flash.style.opacity='0';
    goToRoom();
  }, 320);
}

function spawnStreamers(){
  const colors=['#ff69b4','#ff1493','#ffd700','#ff85b3','#c71585','#ffffff',
                '#ffb6c1','#b040ff','#ff0066','#ffe566','#00e5ff','#ff4081'];
  for(let i=0;i<60;i++){
    const el=document.createElement('div');
    el.className='streamer';
    const w=5+Math.random()*9;
    const h=22+Math.random()*38;
    const left=Math.random()*106-3;
    const dur=1100+Math.random()*900;
    const delay=Math.random()*500;
    el.style.cssText=`
      left:${left}%;
      width:${w}px;height:${h}px;
      background:${colors[Math.floor(Math.random()*colors.length)]};
      animation:streamer-fall ${dur}ms ${delay}ms cubic-bezier(.2,.6,.35,1) forwards;
    `;
    document.body.appendChild(el);
    setTimeout(()=>el.remove(), dur+delay+120);
  }
}

function goToRoom(){
  const p15=document.getElementById('page15');
  const p2=document.getElementById('page2');
  p15.style.opacity='0';
  setTimeout(()=>{
    p15.style.display='none';
    p2.style.display='block';
    startSlideshow();
    buildBalloons();
    startGlitters('roomGlitters', false);
    startFireflies('roomFireflies', false);
    // Start music
    const music=document.getElementById('bgMusic');
    music.play().catch(()=>{});
    const btn=document.getElementById('musicBtn');
    btn.style.display='flex';
    btn.classList.add('playing');
    document.getElementById('lockBtn').style.display='flex';
    document.getElementById('gameBtn').style.display='flex';
    document.getElementById('scrollBtn').style.display='flex';
    requestAnimationFrame(()=>requestAnimationFrame(()=>{ p2.style.opacity='1'; }));
  }, 600);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MUSIC TOGGLE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function toggleMusic(){
  const music=document.getElementById('bgMusic');
  const btn=document.getElementById('musicBtn');
  if(music.paused){
    music.play();
    btn.textContent='üéµ';
    btn.classList.add('playing');
  } else {
    music.pause();
    btn.textContent='üîá';
    btn.classList.remove('playing');
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SLIDESHOW
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function startSlideshow(){
  const urls=['room1.jpg','room2.jpg','room3.jpg','room4.jpg'];
  const slides=document.querySelectorAll('.slide');
  slides.forEach((s,i)=>{
    s.innerHTML=`<img class="slide-blur" src="${urls[i]}" alt="">
                 <img class="slide-img"  src="${urls[i]}" alt="">`;
  });
  let current=0;
  slides[0].classList.add('active');
  setInterval(()=>{
    slides[current].classList.remove('active');
    current=(current+1)%slides.length;
    slides[current].classList.add('active');
  }, 6000);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CONFETTI BURST
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function spawnConfetti(x, y){
  const colors=['#ff69b4','#ff1493','#ffd700','#ff85b3','#c71585','#ffffff','#ffb6c1','#b040ff','#ff0066','#ffe566'];
  for(let i=0;i<60;i++){
    const el=document.createElement('div');
    const size=4+Math.random()*7;
    const isCircle=Math.random()>.5;
    const isStrip=!isCircle&&Math.random()>.5;
    el.style.cssText=`position:fixed;left:${x}px;top:${y}px;
      width:${size}px;height:${isStrip?size*.35:size}px;
      background:${colors[Math.floor(Math.random()*colors.length)]};
      border-radius:${isCircle?'50%':'2px'};
      pointer-events:none;z-index:9999;`;
    document.body.appendChild(el);
    const angle=Math.random()*Math.PI*2;
    const speed=100+Math.random()*200;
    const vx=Math.cos(angle)*speed;
    const vy=Math.sin(angle)*speed-90;
    const rot=(Math.random()-.5)*720;
    el.animate([
      {transform:`translate(-50%,-50%) rotate(0deg)`,opacity:1},
      {transform:`translate(calc(-50% + ${vx}px),calc(-50% + ${vy+180}px)) rotate(${rot}deg)`,opacity:0}
    ],{duration:700+Math.random()*500,easing:'cubic-bezier(.25,.46,.45,.94)',fill:'forwards'})
    .finished.then(()=>el.remove());
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   BUILD BALLOONS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function buildBalloons(){
  const layer=document.getElementById('balloonLayer');
  const movers=[];
  GREETINGS.forEach((g,i)=>{
    const balloon=makeBalloon(g.color[0],g.color[1],i+1,false);
    balloon.addEventListener('click',(e)=>{
      e.stopPropagation();
      spawnConfetti(e.clientX,e.clientY);
      setTimeout(()=>openMsg(i),380);
    });
    layer.appendChild(balloon);
    const angle=Math.random()*Math.PI*2;
    const speed=0.055+Math.random()*0.07;
    const x=8+Math.random()*78;
    const y=5+Math.random()*78;
    balloon.style.left=x+'%';
    balloon.style.top=y+'%';
    const mover={el:balloon,x,y,vx:Math.cos(angle)*speed,vy:Math.sin(angle)*speed,paused:false};
    balloon.addEventListener('mouseenter',()=>{ mover.paused=true; });
    balloon.addEventListener('mouseleave',()=>{ mover.paused=false; });
    movers.push(mover);
  });
  (function tick(){
    movers.forEach(b=>{
      if(!b.paused){
        b.x+=b.vx; b.y+=b.vy;
        if(b.x<2){b.x=2;b.vx=Math.abs(b.vx);}
        if(b.x>88){b.x=88;b.vx=-Math.abs(b.vx);}
        if(b.y<1){b.y=1;b.vy=Math.abs(b.vy);}
        if(b.y>86){b.y=86;b.vy=-Math.abs(b.vy);}
        b.el.style.left=b.x+'%';
        b.el.style.top=b.y+'%';
      }
    });
    requestAnimationFrame(tick);
  })();
}

function makeBalloon(c1,c2,number,isLocked){
  const div=document.createElement('div');
  div.className='balloon'+(isLocked?' balloon-locked':'');
  const bfd=Math.random()*3;
  div.style.cssText=`--bfd:${bfd}s;`;
  div.innerHTML=`
    <div class="balloon-body">
      <div class="balloon-shine"></div>
      <div class="balloon-label">${number}</div>
    </div>
    <div class="balloon-string"></div>`;
  return div;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MESSAGE MODAL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function openMsg(i){
  const g=GREETINGS[i];
  const emojiEl=document.getElementById('msgEmoji');
  if(g.image){
    emojiEl.innerHTML=`<img class="msg-big-img" src="${g.image}" alt="${g.from}">`;
  } else {
    emojiEl.innerHTML=g.emoji;
  }
  document.getElementById('msgFrom').textContent=`From: ${g.from}`;
  document.getElementById('msgText').textContent=g.message;
  document.getElementById('msgModal').classList.add('show');
}
function closeMsgModal(){ document.getElementById('msgModal').classList.remove('show'); }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SCROLL MESSAGE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const SCROLL_TEXT = `‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶

ùìóùì™ùìπùìπùîÇ ùìëùì≤ùìªùìΩùì±ùì≠ùì™ùîÇ, ùìüùìüùìü üéâ üíñ üéâ

‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶

To our dearest pink-obsessed queen,
  professional sleeper & full-time duck-face influencer ‚Äî

May this day be as radiant as your spirit,
as pink as your very soul, and as dramatic
as a finale episode of Love Is Blind. üå∏

May your Starbucks always hit perfectly,
may your pink mug stay eternally iconic,
and may the TikTok algorithm forever
bless you with nothing but elite content. ‚ú®

‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶

You rise at 4AM on weekdays like a
  responsible and distinguished legend‚Ä¶

‚Ä¶and then on weekends, you vanish
  into the sacred realm of hibernation,
  emerging approximately 3 business days later.

Honestly? We bow to the dedication. ü´°

‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶

We humbly admire your devotion to the arts of :

  ‚ùã  Sleeping as though it were your
       sworn vocation & life's purpose

  ‚ùã  Doom-scrolling TikTok with the
       discipline of an Olympic athlete

  ‚ùã  Studying Love Is Blind as though
       it were sacred academic research

  ‚ùã  Maintaining "no social life apparently"
       ‚Äî deeply relatable, we must confess

  ‚ùã  And above all‚Ä¶ the immortal proclamation :

  ‚ùù no knowledge, lemme be dumb ‚ùû

~ A verse worthy of being chiselled into
  the Midnight Misfit history books, forever ~

‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶

And your duck-face portraits?

  Absolutely. Iconic.

We shall roast you for them until the end of time ‚Äî
yet deep within our hearts, we know it is
your signature. Your brand. Your legacy. ü¶Ü

  Never change.

‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶

May this year bestow upon you :

  ‚ùã  Unlimited pink things üíó
  ‚ùã  Endless Starbucks ‚òï
  ‚ùã  Top-tier TikTok content üì±
  ‚ùã  Maximum, glorious sleep üò¥
  ‚ùã  And perhaps‚Ä¶ one (1) social interaction
       ‚Äî entirely optional, of course

‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶

  ùìóùì™ùìπùìπùîÇ ùìëùì≤ùìªùìΩùì±ùì≠ùì™ùîÇ, ùìüùìüùìü üéÇ üéÄ

  We love you more than words can say. ü´∂

     ‚Äî Midnight Misfit üíï ‚Äî

‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ú¶`;

let scrollAnimId=null;
function openScroll(){
  const overlay=document.getElementById('scrollOverlay');
  overlay.style.display='flex';
  buildScrollChars();
  animateScrollChars();
}
function closeScroll(){
  if(scrollAnimId) clearTimeout(scrollAnimId);
  document.getElementById('scrollOverlay').style.display='none';
}
function buildScrollChars(){
  const container=document.getElementById('scrollContent');
  container.innerHTML='';
  [...SCROLL_TEXT].forEach(ch=>{
    const s=document.createElement('span');
    s.className='sc'+(ch.match(/\p{Emoji}/u)?' emoji':'');
    s.textContent=ch;
    container.appendChild(s);
  });
}
function animateScrollChars(){
  const chars=document.querySelectorAll('#scrollContent .sc');
  chars.forEach(c=>c.classList.remove('lit'));
  let i=0;
  function step(){
    if(i>=chars.length) return;
    chars[i].classList.add('lit');
    i++;
    scrollAnimId=setTimeout(step, i<10?60:16);
  }
  step();
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DUCK FACE GAME
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function openGame(){
  document.getElementById('gameOverlay').style.display='flex';
  resetGame();
}
function closeGame(){
  document.getElementById('gameOverlay').style.display='none';
}
function resetGame(){
  const container=document.getElementById('gameBubbles');
  const msg=document.getElementById('gameMsg');
  msg.textContent=''; msg.className='game-msg';
  container.innerHTML='';
  // 5 ducks + 1 selfie, shuffled
  const items=[
    {type:'selfie'},{type:'duck'},{type:'duck'},{type:'duck'},{type:'duck'},{type:'duck'}
  ];
  for(let i=items.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [items[i],items[j]]=[items[j],items[i]];
  }
  items.forEach((item)=>{
    const bubble=document.createElement('div');
    bubble.className='game-bubble';
    if(item.type==='selfie'){
      bubble.innerHTML='<img src="selfie.png" alt="duck face">';
    } else {
      bubble.innerHTML='<div class="duck-emoji">ü¶Ü</div>';
    }
    bubble.addEventListener('click',(e)=>shootBubble(e,item.type,bubble));
    container.appendChild(bubble);
  });
}
function shootBubble(e,type,bubble){
  playShootSound();
  showShootEffect(e.clientX,e.clientY);
  const msg=document.getElementById('gameMsg');
  if(type==='duck'){
    msg.textContent='‚ùå Wrong, try again!';
    msg.className='game-msg wrong';
    bubble.classList.add('shot');
    setTimeout(()=>bubble.classList.remove('shot'),550);
    setTimeout(()=>{ msg.className='game-msg'; msg.textContent=''; },1800);
  } else {
    msg.textContent='‚úÖ That is correct! üéâ';
    msg.className='game-msg correct';
    setTimeout(showGameWin,800);
  }
}
function showGameWin(){
  const container=document.getElementById('gameBubbles');
  const msg=document.getElementById('gameMsg');
  container.innerHTML=`
    <div class="game-win">
      <div class="game-win-text">üéâ You found her! ü¶Üüíï</div>
      <img class="game-win-img" src="selfie2.png" alt="the real duck face">
    </div>`;
  msg.textContent='';
}
function playShootSound(){
  try{
    const ctx=new(window.AudioContext||window.webkitAudioContext)();
    const osc=ctx.createOscillator();
    const gain=ctx.createGain();
    osc.connect(gain); gain.connect(ctx.destination);
    osc.type='sawtooth';
    osc.frequency.setValueAtTime(620,ctx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(80,ctx.currentTime+0.14);
    gain.gain.setValueAtTime(0.22,ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001,ctx.currentTime+0.18);
    osc.start(ctx.currentTime);
    osc.stop(ctx.currentTime+0.2);
  }catch(err){}
}
function showShootEffect(x,y){
  const el=document.createElement('div');
  el.className='shoot-effect';
  el.innerHTML='<div class="shoot-ring"></div>';
  el.style.left=x+'px'; el.style.top=y+'px';
  document.body.appendChild(el);
  setTimeout(()=>el.remove(),520);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   LOCK BUTTON
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function lockBtnClick(e){
  spawnConfetti(e.clientX, e.clientY);
  setTimeout(()=>showPwModal(), 350);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   PASSWORD MODAL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function showPwModal(){
  document.getElementById('pwModal').classList.add('show');
  document.getElementById('pwInput').value='';
  document.getElementById('pwError').classList.remove('show');
  setTimeout(()=>document.getElementById('pwInput').focus(),120);
}
function closePwModal(){ document.getElementById('pwModal').classList.remove('show'); }
function checkPw(){
  const v=document.getElementById('pwInput').value;
  if(v===SECRET_PASSWORD){
    closePwModal();
    setTimeout(openDiary, 250);
  } else {
    const e=document.getElementById('pwError');
    e.classList.add('show');
    document.getElementById('pwInput').value='';
    document.getElementById('pwInput').focus();
    setTimeout(()=>e.classList.remove('show'),3000);
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DIARY ‚Äî SECRET LETTER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const DIARY_LETTER = `Feliz cumplea√±os, Frances‚Ä¶ mi preciosa üíñ

Hoy no quer√≠a escribirte algo simple. T√∫ no eres simple para m√≠. Eres de esas personas que llegan a tu vida inesperadamente‚Ä¶ y de repente se vuelven indispensables.

Estoy eternamente agradecido por haberte conocido en este c√≠rculo de amigos. Nunca imagin√© que podr√≠a sentirme tan cercano a alguien que est√° tan lejos f√≠sicamente. Y aun as√≠, contigo la distancia no existe.

Has estado conmigo en mis peores momentos. En mis crisis. En d√≠as donde todo se sent√≠a pesado y oscuro. Y t√∫ estuviste ah√≠, con tu paciencia, tu dulzura y tu forma tan especial de escuchar. Nunca en mi vida me hab√≠a sentido tan cerca de alguien como me siento contigo.

Y quiero que sepas algo muy honesto‚Ä¶
No hay notificaci√≥n que me haga m√°s feliz que ver que t√∫ me has escrito. Ninguna. Cuando veo tu nombre aparecer, autom√°ticamente sonr√≠o. Mi d√≠a cambia. As√≠ de simple.

Tum meri zindagi ka ek bohot important hissa ho.
(You are a very important part of my life.)

S√≠, eres hermosa. Eres preciosa ‚Äî y no lo digo solo como apodo. Lo eres de verdad. Pero no es tu belleza lo que me hizo quererte tanto como amiga. Es tu coraz√≥n. Tu alma. Tu forma de ser. La manera en que cuidas, en que sientes, en que existes.

Hay algo en ti que no se puede explicar‚Ä¶ solo se siente.
Hay amistades que parecen destino disfrazado de casualidad.

Cuando te alejaste un tiempo‚Ä¶ ten√≠a miedo. Miedo de algo que ni siquiera sab√≠a c√≥mo explicar. Me asustaba pensar que podr√≠a quererte siempre, incluso en silencio. Me preocupaba perder lo que tenemos. Pero hoy lo digo con calma y seguridad: eso no volver√° a pasar. No voy a dejar que el miedo cree distancia otra vez.

Main hamesha tumhare saath hoon. (I will always be with you.)
Sin dramas. Sin dudas. Con madurez.

Los diamantes que te regal√© pueden ser valiosos, pero comparados contigo no significan nada. Porque t√∫ eres la verdadera joya. T√∫ brillas m√°s que cualquier piedra preciosa.

Tum khud ek gem ho. (You yourself are a gem.)

Solo quiero que est√©s feliz. Que sonr√≠as. Que la vida te trate con suavidad. Que nunca dudes de lo incre√≠ble que eres.

Y quiero que te abras conmigo tanto como yo me abro contigo. Quiero ser tu mejor amigo, hoy y siempre. Quiero que sientas que conmigo est√°s segura. Que puedes decirme todo. Que puedes ser t√∫.

Hacer cosas por ti me hace feliz. Mostrarte lo que significas para m√≠ me hace sentir bien. Porque t√∫ importas, Frances. Much√≠simo.

Este website es mi forma de decir:
Gracias, preciosa.
Gracias por existir en mi vida. Gracias por quedarte.

Feliz cumplea√±os, mi preciosa üíó
Te quiero m√°s de lo que sabes.

Hamesha muskurate raho. (Keep smiling always.)

Con todo mi cari√±o,
Snooty üíñ`;

function openDiary(){
  const overlay=document.getElementById('diaryOverlay');
  document.getElementById('diaryCoverWrap').classList.remove('flipped');
  document.getElementById('diaryOpen').classList.remove('visible');
  document.getElementById('diaryContent').innerHTML='';
  overlay.style.display='flex';
}
function closeDiary(){
  if(diaryAnimId) clearTimeout(diaryAnimId);
  document.getElementById('diaryOverlay').style.display='none';
}
function flipDiaryOpen(){
  document.getElementById('diaryCoverWrap').classList.add('flipped');
  setTimeout(()=>{
    document.getElementById('diaryOpen').classList.add('visible');
    buildDiaryChars();
    animateDiaryChars();
  }, 850);
}
function buildDiaryChars(){
  const container=document.getElementById('diaryContent');
  container.innerHTML='';
  [...DIARY_LETTER].forEach(ch=>{
    const s=document.createElement('span');
    s.className='dlc'+(ch.match(/\p{Emoji}/u)?' emoji':'');
    s.textContent=ch;
    container.appendChild(s);
  });
}
let diaryAnimId=null;
function animateDiaryChars(){
  const chars=document.querySelectorAll('#diaryContent .dlc');
  chars.forEach(c=>c.classList.remove('lit'));
  let i=0;
  function step(){
    if(i>=chars.length) return;
    chars[i].classList.add('lit');
    i++;
    diaryAnimId=setTimeout(step, i<10?70:13);
  }
  step();
}
</script>
</body>
</html>
